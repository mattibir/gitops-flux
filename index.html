<!DOCTYPE html>
<html lang="de" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-translate-key="page.title">GitOps & Flux Visualisiert - Eine Einführung</title>
    <title>GitOps & Flux Visualisiert - Eine Einführung</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      @font-face {
        font-family: 'LucideIcons';
        src: url(https://cdn.jsdelivr.net/npm/lucide-static@latest/font/Lucide.ttf) format('truetype');
      }
      .lucide {
        font-family: 'LucideIcons';
        font-style: normal;
        font-weight: normal;
        font-variant: normal;
        text-rendering: auto;
        line-height: 1;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
      }
      /* Basic styles for code blocks */
      pre[class*="language-"] {
        padding: 1em;
        margin: .5em 0;
        overflow: auto;
        border-radius: 0.375rem; /* rounded-md */
      }
      /* Style for copy button */
      .copy-button {
        position: absolute;
        top: 0.5rem;
        right: 0.5rem;
        padding: 0.25rem 0.5rem;
        font-size: 0.75rem;
        border-radius: 0.25rem;
        cursor: pointer;
        opacity: 0.7;
        transition: opacity 0.2s ease-in-out;
      }
      pre:hover .copy-button {
        opacity: 1;
      }
      /* Simple quiz result styling */
      .quiz-correct { color: #10B981; } /* emerald-500 */
      .quiz-incorrect { color: #EF4444; } /* red-500 */
      .quiz-feedback { margin-top: 0.5rem; font-weight: bold; }

      /* Mobile Nav Styling */
      #mobile-menu {
        transition: transform 0.3s ease-in-out;
      }
      #mobile-menu.hidden {
        transform: translateX(-100%);
      }
    </style>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script>
      tailwind.config = {
        darkMode: 'selector', // Enable dark mode using class="dark" on <html>
        theme: {
          extend: {
            fontFamily: {
              sans: ['Inter', 'sans-serif'],
            },
            colors: {
              // Define custom colors if needed
              primary: {
                DEFAULT: '#0ea5e9', // sky-500
                dark: '#38bdf8' // sky-400
              },
              secondary: {
                DEFAULT: '#64748b', // slate-500
                dark: '#94a3b8' // slate-400
              },
              background: {
                light: '#f8fafc', // slate-50
                dark: '#0f172a' // slate-900
              },
              card: {
                light: '#ffffff',
                dark: '#1e293b' // slate-800
              },
              text: {
                light: '#0f172a', // slate-900
                dark: '#e2e8f0' // slate-200
              },
              muted: {
                light: '#64748b', // slate-500
                dark: '#94a3b8' // slate-400
              }
            }
          }
        }
      }
    </script>
</head>
<body class="font-sans bg-background-light dark:bg-background-dark text-text-light dark:text-text-dark transition-colors duration-300">

    <header class="sticky top-0 z-50 bg-card-light dark:bg-card-dark shadow-md transition-colors duration-300">
        <nav class="container mx-auto px-4 sm:px-6 lg:px-8 py-3 flex justify-between items-center">
            <div class="text-xl font-bold text-primary dark:text-primary-dark" data-translate-key="nav.brand">
                GitOps & Flux
            </div>
            <div class="hidden md:flex space-x-6 items-center">
                <a href="#einfuehrung" class="text-secondary hover:text-primary dark:text-secondary-dark dark:hover:text-primary-dark transition-colors" data-translate-key="nav.introduction">Einführung</a>
                <a href="#quickstart" class="text-secondary hover:text-primary dark:text-secondary-dark dark:hover:text-primary-dark transition-colors" data-translate-key="nav.quickstart">Quick Start</a>
                <a href="#gitops" class="text-secondary hover:text-primary dark:text-secondary-dark dark:hover:text-primary-dark transition-colors" data-translate-key="nav.whatisgitops">Was ist GitOps?</a>
                <a href="#flux" class="text-secondary hover:text-primary dark:text-secondary-dark dark:hover:text-primary-dark transition-colors" data-translate-key="nav.whatisflux">Was ist Flux?</a>
                <a href="#workflow" class="text-secondary hover:text-primary dark:text-secondary-dark dark:hover:text-primary-dark transition-colors" data-translate-key="nav.workflow">Workflow</a>
                <a href="#quiz" class="text-secondary hover:text-primary dark:text-secondary-dark dark:hover:text-primary-dark transition-colors" data-translate-key="nav.quiz">Quiz</a>
                <a href="#fazit" class="text-secondary hover:text-primary dark:text-secondary-dark dark:hover:text-primary-dark transition-colors" data-translate-key="nav.conclusion">Fazit</a>
                <button id="language-toggle" aria-label="Toggle Language" class="ml-4 text-secondary hover:text-primary dark:text-secondary-dark dark:hover:text-primary-dark transition-colors font-medium text-sm">EN</button>
                <button id="dark-mode-toggle" aria-label="Toggle Dark Mode" class="ml-4 text-secondary hover:text-primary dark:text-secondary-dark dark:hover:text-primary-dark transition-colors" data-translate-aria-label="nav.toggleDarkMode">
                    <span class="lucide text-xl"></span> </button>
            </div>
            <div class="md:hidden flex items-center">
                 <button id="language-toggle-mobile" aria-label="Toggle Language" class="mr-4 text-secondary hover:text-primary dark:text-secondary-dark dark:hover:text-primary-dark transition-colors font-medium text-sm">EN</button>
                 <button id="dark-mode-toggle-mobile" aria-label="Toggle Dark Mode" class="mr-4 text-secondary hover:text-primary dark:text-secondary-dark dark:hover:text-primary-dark transition-colors" data-translate-aria-label="nav.toggleDarkMode">
                    <span class="lucide text-xl"></span> </button>
                <button id="mobile-menu-button" aria-label="Open Menu" class="text-secondary hover:text-primary dark:text-secondary-dark dark:hover:text-primary-dark focus:outline-none" data-translate-aria-label="nav.openMenu">
                    <span class="lucide text-2xl">&#xe9b2;</span> </button>
            </div>
        </nav>
        <div id="mobile-menu" class="fixed inset-y-0 left-0 w-64 bg-card-light dark:bg-card-dark shadow-lg p-4 transform -translate-x-full md:hidden transition-transform duration-300 ease-in-out z-40">
             <button id="mobile-close-button" aria-label="Close Menu" class="absolute top-4 right-4 text-secondary hover:text-primary dark:text-secondary-dark dark:hover:text-primary-dark" data-translate-aria-label="nav.closeMenu">
                 <span class="lucide text-2xl">&#xea11;</span> </button>
            <nav class="mt-10 flex flex-col space-y-4">
                <a href="#einfuehrung" class="block px-3 py-2 rounded-md text-base font-medium text-secondary hover:text-primary hover:bg-gray-100 dark:text-secondary-dark dark:hover:text-primary-dark dark:hover:bg-slate-700 mobile-nav-link" data-translate-key="nav.introduction">Einführung</a>
                <a href="#quickstart" class="block px-3 py-2 rounded-md text-base font-medium text-secondary hover:text-primary hover:bg-gray-100 dark:text-secondary-dark dark:hover:text-primary-dark dark:hover:bg-slate-700 mobile-nav-link" data-translate-key="nav.quickstart">Quick Start</a>
                <a href="#gitops" class="block px-3 py-2 rounded-md text-base font-medium text-secondary hover:text-primary hover:bg-gray-100 dark:text-secondary-dark dark:hover:text-primary-dark dark:hover:bg-slate-700 mobile-nav-link" data-translate-key="nav.whatisgitops">Was ist GitOps?</a>
                <a href="#flux" class="block px-3 py-2 rounded-md text-base font-medium text-secondary hover:text-primary hover:bg-gray-100 dark:text-secondary-dark dark:hover:text-primary-dark dark:hover:bg-slate-700 mobile-nav-link" data-translate-key="nav.whatisflux">Was ist Flux?</a>
                <a href="#workflow" class="block px-3 py-2 rounded-md text-base font-medium text-secondary hover:text-primary hover:bg-gray-100 dark:text-secondary-dark dark:hover:text-primary-dark dark:hover:bg-slate-700 mobile-nav-link" data-translate-key="nav.workflow">Workflow</a>
                <a href="#quiz" class="block px-3 py-2 rounded-md text-base font-medium text-secondary hover:text-primary hover:bg-gray-100 dark:text-secondary-dark dark:hover:text-primary-dark dark:hover:bg-slate-700 mobile-nav-link" data-translate-key="nav.quiz">Quiz</a>
                <a href="#fazit" class="block px-3 py-2 rounded-md text-base font-medium text-secondary hover:text-primary hover:bg-gray-100 dark:text-secondary-dark dark:hover:text-primary-dark dark:hover:bg-slate-700 mobile-nav-link" data-translate-key="nav.conclusion">Fazit</a>
            </nav>
        </div>
    </header>

    <main class="container mx-auto px-4 sm:px-6 lg:px-8 py-8 md:py-12">

        <section id="hero" class="text-center py-16 md:py-24">
            <h1 class="text-4xl md:text-5xl lg:text-6xl font-bold mb-4 text-text-light dark:text-text-dark">
                <span data-translate-key="hero.title1">GitOps & Flux</span> <span class="text-primary dark:text-primary-dark" data-translate-key="hero.title2">Visualisiert</span>
            </h1>
            <p class="text-lg md:text-xl text-muted-light dark:text-muted-dark mb-8 max-w-3xl mx-auto" data-translate-key="hero.subtitle">
                Ein moderner Ansatz für Continuous Delivery auf Kubernetes. Verstehen Sie die Prinzipien und Werkzeuge, die Ihre Deployments revolutionieren können.
            </p>
            <a href="#quickstart" class="inline-block bg-primary hover:bg-sky-600 dark:bg-primary-dark dark:hover:bg-sky-500 text-white font-semibold py-3 px-8 rounded-lg shadow-md transition-all duration-300" data-translate-key="hero.button">
                Loslegen: Quick Start
            </a>
        </section>

        <section id="einfuehrung" class="py-12 md:py-16 scroll-mt-20">
            <h2 class="text-3xl font-bold mb-6 text-center" data-translate-key="introduction.title">Einführung: Die Herausforderung moderner Deployments</h2>
            <div class="max-w-3xl mx-auto text-lg text-muted-light dark:text-muted-dark space-y-4">
                <p data-translate-key="introduction.p1">
                    Moderne Anwendungen, insbesondere auf Plattformen wie Kubernetes, bestehen oft aus vielen Komponenten und Konfigurationen. Das Management von Updates, Konsistenz über Umgebungen hinweg und die Nachvollziehbarkeit von Änderungen wird schnell komplex.
                </p>
                <p data-translate-key="introduction.p2">
                    Traditionelle CI/CD-Pipelines stoßen hier an Grenzen. Wie können wir sicherstellen, dass der <em>tatsächliche</em> Zustand unserer Infrastruktur und Anwendungen <em>immer</em> dem gewünschten Zustand entspricht, der sicher und nachvollziehbar verwaltet wird?
                </p>
                <p class="font-semibold text-text-light dark:text-text-dark" data-translate-key="introduction.p3">
                    Hier kommen GitOps und Werkzeuge wie Flux ins Spiel.
                </p>
            </div>
        </section>

        <section id="quickstart" class="py-12 md:py-16 bg-card-light dark:bg-card-dark rounded-lg shadow-lg scroll-mt-20">
            <div class="max-w-4xl mx-auto px-6 lg:px-8">
                <h2 class="text-3xl font-bold mb-8 text-center" data-translate-key="quickstart.title">Quick Start Guide: In 5 Minuten mit GitOps starten</h2>

                <h3 class="text-xl font-semibold mb-4" data-translate-key="quickstart.prerequisites.title">Voraussetzungen</h3>
                <ul class="list-none space-y-2 mb-8 text-muted-light dark:text-muted-dark">
                    <li class="flex items-center"><span class="lucide text-primary dark:text-primary-dark mr-3">&#xe9ce;</span> <span data-translate-key="quickstart.prerequisites.l1">Ein laufender Kubernetes Cluster (z.B. minikube, kind, Cloud-Cluster)</span></li>
                    <li class="flex items-center"><span class="lucide text-primary dark:text-primary-dark mr-3">&#xe9ce;</span> <span data-translate-key="quickstart.prerequisites.l2">`kubectl` CLI Tool installiert und konfiguriert</span></li>
                    <li class="flex items-center"><span class="lucide text-primary dark:text-primary-dark mr-3">&#xe9ce;</span> <span data-translate-key="quickstart.prerequisites.l3">Ein Git Repository (z.B. auf GitHub, GitLab)</span></li>
                </ul>

                <h3 class="text-xl font-semibold mb-4" data-translate-key="quickstart.install.title">Installation & Bootstrap</h3>
                <div class="space-y-6">
                    <div>
                        <h4 class="font-medium mb-1" data-translate-key="quickstart.install.step1.title">1. Flux CLI installieren</h4>
                        <div class="relative">
                            <pre class="language-bash bg-slate-100 dark:bg-slate-900 text-sm"><code class="language-bash">curl -s https://fluxcd.io/install.sh | sudo bash</code><button class="copy-button bg-slate-300 dark:bg-slate-700 text-slate-700 dark:text-slate-300 hover:bg-slate-400 dark:hover:bg-slate-600" data-translate-key="common.copy">Copy</button></pre>
                        </div>
                    </div>
                    <div>
                        <h4 class="font-medium mb-1" data-translate-key="quickstart.install.step2.title">2. Cluster überprüfen</h4>
                         <div class="relative">
                            <pre class="language-bash bg-slate-100 dark:bg-slate-900 text-sm"><code class="language-bash">flux check --pre</code><button class="copy-button bg-slate-300 dark:bg-slate-700 text-slate-700 dark:text-slate-300 hover:bg-slate-400 dark:hover:bg-slate-600" data-translate-key="common.copy">Copy</button></pre>
                         </div>
                    </div>
                    <div>
                        <h4 class="font-medium mb-1" data-translate-key="quickstart.install.step3.title">3. Flux im Cluster installieren (Bootstrap)</h4>
                        <p class="text-sm text-muted-light dark:text-muted-dark mb-2" data-translate-key="quickstart.install.step3.p1">Passt die Werte für `--owner`, `--repository` etc. an eure Umgebung an.</p>
                         <div class="relative">
                            <pre class="language-bash bg-slate-100 dark:bg-slate-900 text-sm"><code class="language-bash"># <span data-translate-key="quickstart.install.step3.codecomment">Beispiel für GitHub</span>
flux bootstrap github \
  --owner=$GITHUB_USER \
  --repository=mein-cluster-repo \
  --branch=main \
  --path=./clusters/mein-cluster \
  --personal</code><button class="copy-button bg-slate-300 dark:bg-slate-700 text-slate-700 dark:text-slate-300 hover:bg-slate-400 dark:hover:bg-slate-600" data-translate-key="common.copy">Copy</button></pre>
                         </div>
                         <p class="text-sm text-muted-light dark:text-muted-dark mt-2" data-translate-key="quickstart.install.step3.p2">Dieser Befehl installiert Flux, erstellt Deploy Keys und committet die Flux-Konfiguration in dein Repository.</p>
                    </div>
                     <div>
                        <h4 class="font-medium mb-1" data-translate-key="quickstart.install.step4.title">4. Beispielanwendung deployen</h4>
                        <p class="text-sm text-muted-light dark:text-muted-dark mb-2" data-translate-key="quickstart.install.step4.p1">Füge eine Kubernetes Manifest-Datei (z.B. `nginx-deployment.yaml`) in deinem Git Repository unter dem Pfad hinzu, den du bei `--path` angegeben hast (`./clusters/mein-cluster`). Flux wird diese Änderung erkennen und anwenden.</p>
                         <div class="relative">
                            <pre class="language-yaml bg-slate-100 dark:bg-slate-900 text-sm"><code class="language-yaml"># <span data-translate-key="quickstart.install.step4.codecomment">Beispiel: ./clusters/mein-cluster/nginx-deployment.yaml</span>
apiVersion: apps/v1
kind: Deployment
metadata:
  name: nginx-deployment
  labels:
    app: nginx
spec:
  replicas: 2
  selector:
    matchLabels:
      app: nginx
  template:
    metadata:
      labels:
        app: nginx
    spec:
      containers:
      - name: nginx
        image: nginx:1.25 # <span data-translate-key="quickstart.install.step4.codecomment2">Flux kann auch Image-Updates automatisieren!</span>
        ports:
        - containerPort: 80</code><button class="copy-button bg-slate-300 dark:bg-slate-700 text-slate-700 dark:text-slate-300 hover:bg-slate-400 dark:hover:bg-slate-600" data-translate-key="common.copy">Copy</button></pre>
                         </div>
                         <p class="text-sm text-muted-light dark:text-muted-dark mt-2" data-translate-key="quickstart.install.step4.p2">Committe und pushe diese Datei. Flux wird sie nach kurzer Zeit im Cluster deployen!</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="gitops" class="py-12 md:py-16 scroll-mt-20">
            <h2 class="text-3xl font-bold mb-8 text-center" data-translate-key="gitops.title">Was ist GitOps?</h2>
            <div class="max-w-4xl mx-auto grid grid-cols-1 md:grid-cols-2 gap-8 lg:gap-12">
                <div class="bg-card-light dark:bg-card-dark p-6 rounded-lg shadow">
                    <h3 class="text-xl font-semibold mb-3" data-translate-key="gitops.definition.title">Definition</h3>
                    <p class="text-muted-light dark:text-muted-dark" data-translate-key="gitops.definition.p1">
                        GitOps ist ein Betriebsmodell für Cloud-Native-Anwendungen (insbesondere Kubernetes), das Git als **Single Source of Truth** (einzige Quelle der Wahrheit) für die deklarative Infrastruktur und Anwendungsdefinitionen nutzt. Änderungen am System werden über Git Commits gesteuert und automatisch angewendet.
                    </p>
                </div>

                <div class="bg-card-light dark:bg-card-dark p-6 rounded-lg shadow">
                    <h3 class="text-xl font-semibold mb-3" data-translate-key="gitops.benefits.title">Warum GitOps? (Vorteile)</h3>
                    <ul class="list-none space-y-2 text-muted-light dark:text-muted-dark">
                        <li class="flex items-start"><span class="lucide text-green-500 mr-2 mt-1">&#xea14;</span> <span data-translate-key="gitops.benefits.l1"><strong>Nachvollziehbarkeit:</strong> Jede Änderung ist ein Git Commit (wer, was, wann).</span></li>
                        <li class="flex items-start"><span class="lucide text-green-500 mr-2 mt-1">&#xea14;</span> <span data-translate-key="gitops.benefits.l2"><strong>Konsistenz:</strong> Git definiert den Zustand; Abweichungen werden korrigiert.</span></li>
                        <li class="flex items-start"><span class="lucide text-green-500 mr-2 mt-1">&#xea14;</span> <span data-translate-key="gitops.benefits.l3"><strong>Zuverlässigkeit:</strong> Einfache Rollbacks durch `git revert`.</span></li>
                        <li class="flex items-start"><span class="lucide text-green-500 mr-2 mt-1">&#xea14;</span> <span data-translate-key="gitops.benefits.l4"><strong>Produktivität:</strong> Entwickler nutzen bekannte Git-Workflows.</span></li>
                         <li class="flex items-start"><span class="lucide text-green-500 mr-2 mt-1">&#xea14;</span> <span data-translate-key="gitops.benefits.l5"><strong>Sicherheit:</strong> Änderungen sind auditiert und kontrolliert.</span></li>
                    </ul>
                </div>

                <div class="md:col-span-2 bg-card-light dark:bg-card-dark p-6 rounded-lg shadow">
                    <h3 class="text-xl font-semibold mb-4 text-center" data-translate-key="gitops.principles.title">Kernprinzipien</h3>
                    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 text-center">
                        <div class="p-4 border border-slate-200 dark:border-slate-700 rounded">
                            <span class="lucide text-3xl text-primary dark:text-primary-dark mb-2 inline-block">&#xe956;</span> <h4 class="font-semibold" data-translate-key="gitops.principles.declarative.title">Deklarativ</h4>
                            <p class="text-sm text-muted-light dark:text-muted-dark" data-translate-key="gitops.principles.declarative.p1">Der gewünschte Zustand wird beschrieben (YAML), nicht die Schritte dorthin.</p>
                        </div>
                         <div class="p-4 border border-slate-200 dark:border-slate-700 rounded">
                            <span class="lucide text-3xl text-primary dark:text-primary-dark mb-2 inline-block">&#xe961;</span> <h4 class="font-semibold" data-translate-key="gitops.principles.versioned.title">Versioniert in Git</h4>
                            <p class="text-sm text-muted-light dark:text-muted-dark" data-translate-key="gitops.principles.versioned.p1">Git ist die einzige Quelle der Wahrheit.</p>
                        </div>
                         <div class="p-4 border border-slate-200 dark:border-slate-700 rounded">
                            <span class="lucide text-3xl text-primary dark:text-primary-dark mb-2 inline-block">&#xe906;</span> <h4 class="font-semibold" data-translate-key="gitops.principles.automated.title">Automatisch angewendet</h4>
                            <p class="text-sm text-muted-light dark:text-muted-dark" data-translate-key="gitops.principles.automated.p1">Änderungen in Git werden automatisch im System umgesetzt.</p>
                        </div>
                         <div class="p-4 border border-slate-200 dark:border-slate-700 rounded">
                            <span class="lucide text-3xl text-primary dark:text-primary-dark mb-2 inline-block">&#xea6b;</span> <h4 class="font-semibold" data-translate-key="gitops.principles.reconciled.title">Kontinuierlicher Abgleich</h4>
                            <p class="text-sm text-muted-light dark:text-muted-dark" data-translate-key="gitops.principles.reconciled.p1">Agenten stellen sicher, dass der Live-Zustand dem Git-Zustand entspricht.</p>
                        </div>
                    </div>
                </div>
                 <div class="md:col-span-2 text-center p-6 bg-slate-100 dark:bg-slate-800 rounded-lg">
                    <span class="lucide text-4xl text-muted-light dark:text-muted-dark mb-2 inline-block">&#xe9ff;</span> <p class="text-muted-light dark:text-muted-dark" data-translate-key="gitops.visualization.placeholder">(Hier könnte eine Visualisierung des GitOps-Kreislaufs stehen)</p>
                </div>
            </div>
        </section>

        <section id="flux" class="py-12 md:py-16 bg-card-light dark:bg-card-dark rounded-lg shadow-lg scroll-mt-20">
             <div class="max-w-4xl mx-auto px-6 lg:px-8">
                <h2 class="text-3xl font-bold mb-8 text-center" data-translate-key="flux.title">Was ist Flux?</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8 lg:gap-12">
                    <div class="space-y-4">
                        <h3 class="text-xl font-semibold" data-translate-key="flux.tool.title">Ein Werkzeug für GitOps</h3>
                        <p class="text-muted-light dark:text-muted-dark" data-translate-key="flux.tool.p1">
                            Flux ist ein Set von Continuous Delivery Lösungen für Kubernetes, das offen entwickelt wird und den GitOps-Ansatz implementiert. Es überwacht Git Repositories (oder andere Quellen) und synchronisiert den deklarierten Zustand automatisch mit dem Cluster.
                        </p>
                        <p class="text-muted-light dark:text-muted-dark" data-translate-key="flux.tool.p2">
                            Flux ist ein <strong class="text-text-light dark:text-text-dark">CNCF Graduated Project</strong>, was seine Reife und breite Akzeptanz unterstreicht.
                        </p>
                         <div class="pt-4">
                            <h4 class="font-medium mb-2" data-translate-key="flux.alternative.title">Alternative: Argo CD</h4>
                            <p class="text-sm text-muted-light dark:text-muted-dark" data-translate-key="flux.alternative.p1">Argo CD ist ein weiteres sehr beliebtes CNCF GitOps-Werkzeug mit ähnlichen Zielen, aber einer anderen Architektur (eher Pull-basiert mit zentraler UI).</p>
                        </div>
                    </div>
                    <div class="space-y-4">
                        <h3 class="text-xl font-semibold" data-translate-key="flux.architecture.title">Architektur: Die Controller</h3>
                        <p class="text-muted-light dark:text-muted-dark" data-translate-key="flux.architecture.p1">Flux besteht aus spezialisierten Controllern (Kubernetes Operatoren), die zusammenarbeiten:</p>
                        <ul class="list-none space-y-2 text-sm text-muted-light dark:text-muted-dark">
                           <li class="flex items-start"><span class="lucide text-sky-500 dark:text-sky-400 mr-2 mt-1 text-base">&#xe962;</span> <span data-translate-key="flux.architecture.source"><strong>Source Controller:</strong> Holt Manifeste aus Git, Helm Repos, Buckets etc.</span></li>
                           <li class="flex items-start"><span class="lucide text-sky-500 dark:text-sky-400 mr-2 mt-1 text-base">&#xea4c;</span> <span data-translate-key="flux.architecture.kustomize"><strong>Kustomize Controller:</strong> Wendet Kustomizations an.</span></li>
                           <li class="flex items-start"><span class="lucide text-sky-500 dark:text-sky-400 mr-2 mt-1 text-base">&#xe97b;</span> <span data-translate-key="flux.architecture.helm"><strong>Helm Controller:</strong> Verwaltet Helm Releases.</span></li>
                           <li class="flex items-start"><span class="lucide text-sky-500 dark:text-sky-400 mr-2 mt-1 text-base">&#xe9dc;</span> <span data-translate-key="flux.architecture.notification"><strong>Notification Controller:</strong> Sendet Benachrichtigungen (Slack, Teams etc.).</span></li>
                           <li class="flex items-start"><span class="lucide text-sky-500 dark:text-sky-400 mr-2 mt-1 text-base">&#xe9fe;</span> <span data-translate-key="flux.architecture.image"><strong>Image Reflector & Automation Controller:</strong> Überwachen auf neue Container-Images und aktualisieren Git.</span></li>
                        </ul>
                         <div class="text-center p-4 mt-4 bg-slate-100 dark:bg-slate-900 rounded-lg">
                             <span class="lucide text-3xl text-muted-light dark:text-muted-dark mb-1 inline-block">&#xe9ff;</span>
                            <p class="text-sm text-muted-light dark:text-muted-dark" data-translate-key="flux.architecture.placeholder">(Hier könnte ein Architektur-Diagramm stehen)</p>
                        </div>
                    </div>
                </div>
             </div>
        </section>

        <section id="workflow" class="py-12 md:py-16 scroll-mt-20">
            <h2 class="text-3xl font-bold mb-8 text-center" data-translate-key="workflow.title">Der GitOps Workflow mit Flux</h2>
            <div class="max-w-3xl mx-auto space-y-6">
                 <div class="p-6 bg-card-light dark:bg-card-dark rounded-lg shadow flex items-start space-x-4">
                     <div class="flex-shrink-0 w-10 h-10 bg-primary dark:bg-primary-dark text-white rounded-full flex items-center justify-center font-bold text-lg">1</div>
                     <div>
                         <h3 class="font-semibold mb-1" data-translate-key="workflow.step1.title">Änderung in Git</h3>
                         <p class="text-sm text-muted-light dark:text-muted-dark" data-translate-key="workflow.step1.p1">Ein Entwickler oder ein Automatisierungsprozess ändert die deklarative Konfiguration (z.B. Kubernetes YAML, Kustomization, Helm Release) und pusht den Commit nach Git.</p>
                     </div>
                 </div>
                 <div class="p-6 bg-card-light dark:bg-card-dark rounded-lg shadow flex items-start space-x-4">
                     <div class="flex-shrink-0 w-10 h-10 bg-primary dark:bg-primary-dark text-white rounded-full flex items-center justify-center font-bold text-lg">2</div>
                     <div>
                         <h3 class="font-semibold mb-1" data-translate-key="workflow.step2.title">Flux erkennt Änderung</h3>
                         <p class="text-sm text-muted-light dark:text-muted-dark" data-translate-key="workflow.step2.p1">Der Flux Source Controller erkennt den neuen Commit im überwachten Git Repository (oder einer anderen Quelle).</p>
                     </div>
                 </div>
                  <div class="p-6 bg-card-light dark:bg-card-dark rounded-lg shadow flex items-start space-x-4">
                     <div class="flex-shrink-0 w-10 h-10 bg-primary dark:bg-primary-dark text-white rounded-full flex items-center justify-center font-bold text-lg">3</div>
                     <div>
                         <h3 class="font-semibold mb-1" data-translate-key="workflow.step3.title">Flux wendet Änderung an</h3>
                         <p class="text-sm text-muted-light dark:text-muted-dark" data-translate-key="workflow.step3.p1">Abhängig von der Konfiguration rendert der Kustomize Controller oder der Helm Controller die Manifeste und wendet sie auf den Kubernetes Cluster an.</p>
                     </div>
                 </div>
                 <div class="p-6 bg-card-light dark:bg-card-dark rounded-lg shadow flex items-start space-x-4">
                     <div class="flex-shrink-0 w-10 h-10 bg-primary dark:bg-primary-dark text-white rounded-full flex items-center justify-center font-bold text-lg">4</div>
                     <div>
                         <h3 class="font-semibold mb-1" data-translate-key="workflow.step4.title">Kontinuierlicher Abgleich</h3>
                         <p class="text-sm text-muted-light dark:text-muted-dark" data-translate-key="workflow.step4.p1">Flux überwacht den Cluster weiterhin. Werden manuelle Änderungen vorgenommen (Drift), setzt Flux den Zustand automatisch auf den in Git definierten Stand zurück.</p>
                     </div>
                 </div>
                 <div class="p-6 bg-slate-100 dark:bg-slate-800 rounded-lg shadow flex items-start space-x-4">
                     <span class="lucide text-2xl text-muted-light dark:text-muted-dark mt-1">&#xe9fe;</span> <div>
                         <h3 class="font-semibold mb-1" data-translate-key="workflow.optional.title">(Optional) Image Automation</h3>
                         <p class="text-sm text-muted-light dark:text-muted-dark" data-translate-key="workflow.optional.p1">Wenn konfiguriert, können die Flux Image Controller neue Container-Images in einer Registry erkennen, die Image-Tags in den Git-Manifesten aktualisieren (via Commit) und somit den Workflow automatisch für Image-Updates auslösen.</p>
                     </div>
                 </div>
                 <div class="text-center p-6 mt-6 bg-slate-100 dark:bg-slate-800 rounded-lg">
                    <span class="lucide text-4xl text-muted-light dark:text-muted-dark mb-2 inline-block">&#xe9ff;</span> <p class="text-muted-light dark:text-muted-dark" data-translate-key="workflow.placeholder">(Hier könnte eine Visualisierung des Workflows stehen)</p>
                </div>
            </div>
        </section>

        <section id="quiz" class="py-12 md:py-16 bg-card-light dark:bg-card-dark rounded-lg shadow-lg scroll-mt-20">
            <div class="max-w-3xl mx-auto px-6 lg:px-8">
                <h2 class="text-3xl font-bold mb-8 text-center" data-translate-key="quiz.title">Teste dein Wissen!</h2>
                <form id="quiz-form" class="space-y-8">
                    {/* Quiz questions will be populated by JS */}
                </form>
                <div class="text-center mt-8">
                    <button type="button" id="submit-quiz" class="bg-primary hover:bg-sky-600 dark:bg-primary-dark dark:hover:bg-sky-500 text-white font-semibold py-2 px-6 rounded-lg shadow transition-all duration-300" data-translate-key="quiz.submit">
                        Quiz auswerten
                    </button>
                </div>
                <div id="quiz-results" class="mt-8 text-center"></div>
            </div>
        </section>

        <section id="fazit" class="py-12 md:py-16 scroll-mt-20">
            <h2 class="text-3xl font-bold mb-8 text-center" data-translate-key="conclusion.title">Fazit: GitOps mit Flux als Erfolgsfaktor</h2>
            <div class="max-w-3xl mx-auto space-y-6">
                <p class="text-lg text-muted-light dark:text-muted-dark" data-translate-key="conclusion.p1">
                    GitOps, implementiert mit Werkzeugen wie Flux, bietet einen robusten, transparenten und automatisierten Weg, um Kubernetes-Cluster und Anwendungen zu verwalten.
                </p>
                <ul class="list-none space-y-3 text-muted-light dark:text-muted-dark">
                    <li class="flex items-start"><span class="lucide text-green-500 mr-2 mt-1">&#xea14;</span> <span data-translate-key="conclusion.l1">Es etabliert Git als verlässliche Quelle der Wahrheit.</span></li>
                    <li class="flex items-start"><span class="lucide text-green-500 mr-2 mt-1">&#xea14;</span> <span data-translate-key="conclusion.l2">Es fördert Konsistenz und Wiederholbarkeit über Umgebungen hinweg.</span></li>
                    <li class="flex items-start"><span class="lucide text-green-500 mr-2 mt-1">&#xea14;</span> <span data-translate-key="conclusion.l3">Es vereinfacht Rollbacks und Audits erheblich.</span></li>
                    <li class="flex items-start"><span class="lucide text-green-500 mr-2 mt-1">&#xea14;</span> <span data-translate-key="conclusion.l4">Es verbessert die Zusammenarbeit zwischen Entwicklungs- und Betriebsteams.</span></li>
                    <li class="flex items-start"><span class="lucide text-green-500 mr-2 mt-1">&#xea14;</span> <span data-translate-key="conclusion.l5">Es erhöht die Sicherheit durch kontrollierte, automatisierte Änderungen.</span></li>
                </ul>
                 <p class="text-lg text-muted-light dark:text-muted-dark" data-translate-key="conclusion.p2">
                    Durch die Automatisierung des Abgleichs zwischen dem gewünschten Zustand (Git) und dem tatsächlichen Zustand (Cluster) ermöglicht Flux eine zuverlässigere und effizientere Continuous Delivery Pipeline für Cloud-Native-Umgebungen.
                </p>
                <div class="text-center pt-6">
                     <a href="https://fluxcd.io/docs/" target="_blank" rel="noopener noreferrer" class="inline-block bg-secondary hover:bg-slate-600 dark:bg-secondary-dark dark:hover:bg-slate-500 text-white font-semibold py-3 px-8 rounded-lg shadow-md transition-all duration-300" data-translate-key="conclusion.button">
                        Zur Flux Dokumentation <span class="lucide align-middle ml-1">&#xe94f;</span> </a>
                </div>
            </div>
        </section>

    </main>

    <footer class="bg-card-light dark:bg-card-dark border-t border-slate-200 dark:border-slate-700 mt-16 transition-colors duration-300">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8 py-6 text-center text-sm text-muted-light dark:text-muted-dark">
            <p data-translate-key="footer.p1">Visualisierung erstellt zur Erklärung von GitOps und Flux.</p>
            <p data-translate-key="footer.p2">Stand: April 2025. Basierend auf dem Dokument "GitOps & Flux Visualisiert - Eine Einführung".</p>
             <p class="mt-2" data-translate-key="footer.p3">&copy; 2025 - Generiert von Gemini.</p>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', () => {

            // --- Translations Object ---
            const translations = {
                de: {
                    "page.title": "GitOps & Flux Visualisiert - Eine Einführung",
                    "nav.brand": "GitOps & Flux",
                    "nav.introduction": "Einführung",
                    "nav.quickstart": "Quick Start",
                    "nav.whatisgitops": "Was ist GitOps?",
                    "nav.whatisflux": "Was ist Flux?",
                    "nav.workflow": "Workflow",
                    "nav.quiz": "Quiz",
                    "nav.conclusion": "Fazit",
                    "nav.toggleDarkMode": "Dunkelmodus umschalten",
                    "nav.openMenu": "Menü öffnen",
                    "nav.closeMenu": "Menü schließen",
                    "hero.title1": "GitOps & Flux",
                    "hero.title2": "Visualisiert",
                    "hero.subtitle": "Ein moderner Ansatz für Continuous Delivery auf Kubernetes. Verstehen Sie die Prinzipien und Werkzeuge, die Ihre Deployments revolutionieren können.",
                    "hero.button": "Loslegen: Quick Start",
                    "introduction.title": "Einführung: Die Herausforderung moderner Deployments",
                    "introduction.p1": "Moderne Anwendungen, insbesondere auf Plattformen wie Kubernetes, bestehen oft aus vielen Komponenten und Konfigurationen. Das Management von Updates, Konsistenz über Umgebungen hinweg und die Nachvollziehbarkeit von Änderungen wird schnell komplex.",
                    "introduction.p2": "Traditionelle CI/CD-Pipelines stoßen hier an Grenzen. Wie können wir sicherstellen, dass der <em>tatsächliche</em> Zustand unserer Infrastruktur und Anwendungen <em>immer</em> dem gewünschten Zustand entspricht, der sicher und nachvollziehbar verwaltet wird?",
                    "introduction.p3": "Hier kommen GitOps und Werkzeuge wie Flux ins Spiel.",
                    "quickstart.title": "Quick Start Guide: In 5 Minuten mit GitOps starten",
                    "quickstart.prerequisites.title": "Voraussetzungen",
                    "quickstart.prerequisites.l1": "Ein laufender Kubernetes Cluster (z.B. minikube, kind, Cloud-Cluster)",
                    "quickstart.prerequisites.l2": "`kubectl` CLI Tool installiert und konfiguriert",
                    "quickstart.prerequisites.l3": "Ein Git Repository (z.B. auf GitHub, GitLab)",
                    "quickstart.install.title": "Installation & Bootstrap",
                    "quickstart.install.step1.title": "1. Flux CLI installieren",
                    "quickstart.install.step2.title": "2. Cluster überprüfen",
                    "quickstart.install.step3.title": "3. Flux im Cluster installieren (Bootstrap)",
                    "quickstart.install.step3.p1": "Passt die Werte für `--owner`, `--repository` etc. an eure Umgebung an.",
                    "quickstart.install.step3.codecomment": "Beispiel für GitHub",
                    "quickstart.install.step3.p2": "Dieser Befehl installiert Flux, erstellt Deploy Keys und committet die Flux-Konfiguration in dein Repository.",
                    "quickstart.install.step4.title": "4. Beispielanwendung deployen",
                    "quickstart.install.step4.p1": "Füge eine Kubernetes Manifest-Datei (z.B. `nginx-deployment.yaml`) in deinem Git Repository unter dem Pfad hinzu, den du bei `--path` angegeben hast (`./clusters/mein-cluster`). Flux wird diese Änderung erkennen und anwenden.",
                    "quickstart.install.step4.codecomment": "Beispiel: ./clusters/mein-cluster/nginx-deployment.yaml",
                    "quickstart.install.step4.codecomment2": "Flux kann auch Image-Updates automatisieren!",
                    "quickstart.install.step4.p2": "Committe und pushe diese Datei. Flux wird sie nach kurzer Zeit im Cluster deployen!",
                    "gitops.title": "Was ist GitOps?",
                    "gitops.definition.title": "Definition",
                    "gitops.definition.p1": "GitOps ist ein Betriebsmodell für Cloud-Native-Anwendungen (insbesondere Kubernetes), das Git als **Single Source of Truth** (einzige Quelle der Wahrheit) für die deklarative Infrastruktur und Anwendungsdefinitionen nutzt. Änderungen am System werden über Git Commits gesteuert und automatisch angewendet.",
                    "gitops.benefits.title": "Warum GitOps? (Vorteile)",
                    "gitops.benefits.l1": "<strong>Nachvollziehbarkeit:</strong> Jede Änderung ist ein Git Commit (wer, was, wann).",
                    "gitops.benefits.l2": "<strong>Konsistenz:</strong> Git definiert den Zustand; Abweichungen werden korrigiert.",
                    "gitops.benefits.l3": "<strong>Zuverlässigkeit:</strong> Einfache Rollbacks durch `git revert`.",
                    "gitops.benefits.l4": "<strong>Produktivität:</strong> Entwickler nutzen bekannte Git-Workflows.",
                    "gitops.benefits.l5": "<strong>Sicherheit:</strong> Änderungen sind auditiert und kontrolliert.",
                    "gitops.principles.title": "Kernprinzipien",
                    "gitops.principles.declarative.title": "Deklarativ",
                    "gitops.principles.declarative.p1": "Der gewünschte Zustand wird beschrieben (YAML), nicht die Schritte dorthin.",
                    "gitops.principles.versioned.title": "Versioniert in Git",
                    "gitops.principles.versioned.p1": "Git ist die einzige Quelle der Wahrheit.",
                    "gitops.principles.automated.title": "Automatisch angewendet",
                    "gitops.principles.automated.p1": "Änderungen in Git werden automatisch im System umgesetzt.",
                    "gitops.principles.reconciled.title": "Kontinuierlicher Abgleich",
                    "gitops.principles.reconciled.p1": "Agenten stellen sicher, dass der Live-Zustand dem Git-Zustand entspricht.",
                    "gitops.visualization.placeholder": "(Hier könnte eine Visualisierung des GitOps-Kreislaufs stehen)",
                    "flux.title": "Was ist Flux?",
                    "flux.tool.title": "Ein Werkzeug für GitOps",
                    "flux.tool.p1": "Flux ist ein Set von Continuous Delivery Lösungen für Kubernetes, das offen entwickelt wird und den GitOps-Ansatz implementiert. Es überwacht Git Repositories (oder andere Quellen) und synchronisiert den deklarierten Zustand automatisch mit dem Cluster.",
                    "flux.tool.p2": "Flux ist ein <strong class=\"text-text-light dark:text-text-dark\">CNCF Graduated Project</strong>, was seine Reife und breite Akzeptanz unterstreicht.",
                    "flux.alternative.title": "Alternative: Argo CD",
                    "flux.alternative.p1": "Argo CD ist ein weiteres sehr beliebtes CNCF GitOps-Werkzeug mit ähnlichen Zielen, aber einer anderen Architektur (eher Pull-basiert mit zentraler UI).",
                    "flux.architecture.title": "Architektur: Die Controller",
                    "flux.architecture.p1": "Flux besteht aus spezialisierten Controllern (Kubernetes Operatoren), die zusammenarbeiten:",
                    "flux.architecture.source": "<strong>Source Controller:</strong> Holt Manifeste aus Git, Helm Repos, Buckets etc.",
                    "flux.architecture.kustomize": "<strong>Kustomize Controller:</strong> Wendet Kustomizations an.",
                    "flux.architecture.helm": "<strong>Helm Controller:</strong> Verwaltet Helm Releases.",
                    "flux.architecture.notification": "<strong>Notification Controller:</strong> Sendet Benachrichtigungen (Slack, Teams etc.).",
                    "flux.architecture.image": "<strong>Image Reflector & Automation Controller:</strong> Überwachen auf neue Container-Images und aktualisieren Git.",
                    "flux.architecture.placeholder": "(Hier könnte ein Architektur-Diagramm stehen)",
                    "workflow.title": "Der GitOps Workflow mit Flux",
                    "workflow.step1.title": "Änderung in Git",
                    "workflow.step1.p1": "Ein Entwickler oder ein Automatisierungsprozess ändert die deklarative Konfiguration (z.B. Kubernetes YAML, Kustomization, Helm Release) und pusht den Commit nach Git.",
                    "workflow.step2.title": "Flux erkennt Änderung",
                    "workflow.step2.p1": "Der Flux Source Controller erkennt den neuen Commit im überwachten Git Repository (oder einer anderen Quelle).",
                    "workflow.step3.title": "Flux wendet Änderung an",
                    "workflow.step3.p1": "Abhängig von der Konfiguration rendert der Kustomize Controller oder der Helm Controller die Manifeste und wendet sie auf den Kubernetes Cluster an.",
                    "workflow.step4.title": "Kontinuierlicher Abgleich",
                    "workflow.step4.p1": "Flux überwacht den Cluster weiterhin. Werden manuelle Änderungen vorgenommen (Drift), setzt Flux den Zustand automatisch auf den in Git definierten Stand zurück.",
                    "workflow.optional.title": "(Optional) Image Automation",
                    "workflow.optional.p1": "Wenn konfiguriert, können die Flux Image Controller neue Container-Images in einer Registry erkennen, die Image-Tags in den Git-Manifesten aktualisieren (via Commit) und somit den Workflow automatisch für Image-Updates auslösen.",
                    "workflow.placeholder": "(Hier könnte eine Visualisierung des Workflows stehen)",
                    "quiz.title": "Teste dein Wissen!",
                    "quiz.submit": "Quiz auswerten",
                    "quiz.q1.question": "1. Was ist die zentrale \"Quelle der Wahrheit\" (Single Source of Truth) im GitOps-Modell?",
                    "quiz.q1.option1": "A) Der Kubernetes Cluster",
                    "quiz.q1.option2": "B) Eine CI/CD-Pipeline-Konfiguration",
                    "quiz.q1.option3": "C) Ein Git-Repository",
                    "quiz.q1.option4": "D) Die Flux-Operatoren",
                    "quiz.q1.answer": "C) Ein Git-Repository",
                    "quiz.q2.question": "2. Welches Kernprinzip von GitOps beschreibt, dass der *gewünschte* Systemzustand definiert wird, nicht die Schritte dorthin?",
                    "quiz.q2.option1": "A) Versioniert in Git",
                    "quiz.q2.option2": "B) Deklarativ",
                    "quiz.q2.option3": "C) Automatisch angewendet",
                    "quiz.q2.option4": "D) Kontinuierlicher Abgleich",
                    "quiz.q2.answer": "B) Deklarativ",
                    "quiz.q3.question": "3. Was ist Flux im Kontext von GitOps?",
                    "quiz.q3.option1": "A) Ein Cloud-Provider-Service",
                    "quiz.q3.option2": "B) Eine Programmiersprache für Kubernetes",
                    "quiz.q3.option3": "C) Ein Set von Kubernetes-Operatoren, das GitOps implementiert",
                    "quiz.q3.option4": "D) Ein alternatives Versionskontrollsystem zu Git",
                    "quiz.q3.answer": "C) Ein Set von Kubernetes-Operatoren, das GitOps implementiert",
                    "quiz.q4.question": "4. Welcher Flux Controller ist primär dafür zuständig, konfigurierte Quellen wie Git-Repositories auf Änderungen zu überwachen?",
                    "quiz.q4.option1": "A) Helm Controller",
                    "quiz.q4.option2": "B) Kustomize Controller",
                    "quiz.q4.option3": "C) Notification Controller",
                    "quiz.q4.option4": "D) Source Controller",
                    "quiz.q4.answer": "D) Source Controller",
                    "quiz.q5.question": "5. Was bedeutet der Begriff \"Reconciliation\" (Abgleich) im Zusammenhang mit Flux?",
                    "quiz.q5.option1": "A) Das initiale Installieren von Flux im Cluster.",
                    "quiz.q5.option2": "B) Das Senden von Benachrichtigungen bei Fehlern.",
                    "quiz.q5.option3": "C) Der kontinuierliche Prozess, sicherzustellen, dass der Live-Zustand des Clusters dem in Git deklarierten Zustand entspricht und Abweichungen korrigiert werden.",
                    "quiz.q5.option4": "D) Das manuelle Anwenden von Konfigurationen durch einen Entwickler.",
                    "quiz.q5.answer": "C) Der kontinuierliche Prozess, sicherzustellen, dass der Live-Zustand des Clusters dem in Git deklarierten Zustand entspricht und Abweichungen korrigiert werden.",
                    "quiz.q6.question": "6. Was löst typischerweise eine Aktualisierung im Kubernetes-Cluster aus, wenn man einen GitOps-Workflow mit Flux verwendet?",
                    "quiz.q6.option1": "A) Ein manueller `kubectl apply`-Befehl eines Administrators.",
                    "quiz.q6.option2": "B) Ein neuer Commit oder Merge in das überwachte Git-Repository.",
                    "quiz.q6.option3": "C) Ein Neustart des Kubernetes Clusters.",
                    "quiz.q6.option4": "D) Eine Benachrichtigung vom Notification Controller.",
                    "quiz.q6.answer": "B) Ein neuer Commit oder Merge in das überwachte Git-Repository.",
                    "quiz.q7.question": "7. Welcher Vorteil von GitOps wird durch die Git-Historie besonders unterstützt?",
                    "quiz.q7.option1": "A) Gesteigerte Produktivität",
                    "quiz.q7.option2": "B) Verbesserte Sicherheit",
                    "quiz.q7.option3": "C) Höhere Zuverlässigkeit durch einfache Rollbacks",
                    "quiz.q7.option4": "D) Nachvollziehbarkeit und Audits (wer hat was wann geändert)",
                    "quiz.q7.answer": "D) Nachvollziehbarkeit und Audits (wer hat was wann geändert)",
                    "quiz.q8.question": "8. Welcher Flux Controller ist dafür verantwortlich, Kubernetes-Manifeste (z.B. aus Kustomizations oder Helm Charts) tatsächlich im Cluster anzuwenden?",
                    "quiz.q8.option1": "A) Source Controller und Image Controller",
                    "quiz.q8.option2": "B) Kustomize Controller und Helm Controller",
                    "quiz.q8.option3": "C) Notification Controller und Source Controller",
                    "quiz.q8.option4": "D) Nur der Kustomize Controller",
                    "quiz.q8.answer": "B) Kustomize Controller und Helm Controller",
                    "quiz.q9.question": "9. Welche Organisation steht hinter Flux und hat es als \"Graduated Project\" eingestuft?",
                    "quiz.q9.option1": "A) Apache Software Foundation",
                    "quiz.q9.option2": "B) Linux Foundation",
                    "quiz.q9.option3": "C) Cloud Native Computing Foundation (CNCF)",
                    "quiz.q9.option4": "D) Kubernetes Steering Committee",
                    "quiz.q9.answer": "C) Cloud Native Computing Foundation (CNCF)",
                    "quiz.q10.question": "10. Welches andere GitOps-Werkzeug wird im Dokument als beliebte Alternative zu Flux erwähnt?",
                    "quiz.q10.option1": "A) Jenkins X",
                    "quiz.q10.option2": "B) Tekton",
                    "quiz.q10.option3": "C) Argo CD",
                    "quiz.q10.option4": "D) Spinnaker",
                    "quiz.q10.answer": "C) Argo CD",
                    "quiz.feedback.correct": "Richtig!",
                    "quiz.feedback.incorrect": "Falsch. Richtige Antwort: ",
                    "quiz.feedback.noanswer": "Keine Antwort ausgewählt.",
                    "quiz.results.score": "Dein Ergebnis: {score} von {total} ({percentage}%)", // Placeholders for dynamic values
                    "conclusion.title": "Fazit: GitOps mit Flux als Erfolgsfaktor",
                    "conclusion.p1": "GitOps, implementiert mit Werkzeugen wie Flux, bietet einen robusten, transparenten und automatisierten Weg, um Kubernetes-Cluster und Anwendungen zu verwalten.",
                    "conclusion.l1": "Es etabliert Git als verlässliche Quelle der Wahrheit.",
                    "conclusion.l2": "Es fördert Konsistenz und Wiederholbarkeit über Umgebungen hinweg.",
                    "conclusion.l3": "Es vereinfacht Rollbacks und Audits erheblich.",
                    "conclusion.l4": "Es verbessert die Zusammenarbeit zwischen Entwicklungs- und Betriebsteams.",
                    "conclusion.l5": "Es erhöht die Sicherheit durch kontrollierte, automatisierte Änderungen.",
                    "conclusion.p2": "Durch die Automatisierung des Abgleichs zwischen dem gewünschten Zustand (Git) und dem tatsächlichen Zustand (Cluster) ermöglicht Flux eine zuverlässigere und effizientere Continuous Delivery Pipeline für Cloud-Native-Umgebungen.",
                    "conclusion.button": "Zur Flux Dokumentation",
                    "footer.p1": "Visualisierung erstellt zur Erklärung von GitOps und Flux.",
                    "footer.p2": "Stand: April 2025. Basierend auf dem Dokument \"GitOps & Flux Visualisiert - Eine Einführung\".",
                    "footer.p3": "&copy; 2025 - Generiert von Gemini.",
                    "common.copy": "Copy",
                    "common.copied": "Copied!",
                    "common.copyError": "Error"
                },
                en: {
                    "page.title": "GitOps & Flux Visualized - An Introduction",
                    "nav.brand": "GitOps & Flux",
                    "nav.introduction": "Introduction",
                    "nav.quickstart": "Quick Start",
                    "nav.whatisgitops": "What is GitOps?",
                    "nav.whatisflux": "What is Flux?",
                    "nav.workflow": "Workflow",
                    "nav.quiz": "Quiz",
                    "nav.conclusion": "Conclusion",
                    "nav.toggleDarkMode": "Toggle Dark Mode",
                    "nav.openMenu": "Open Menu",
                    "nav.closeMenu": "Close Menu",
                    "hero.title1": "GitOps & Flux",
                    "hero.title2": "Visualized",
                    "hero.subtitle": "A modern approach to Continuous Delivery on Kubernetes. Understand the principles and tools that can revolutionize your deployments.",
                    "hero.button": "Get Started: Quick Start",
                    "introduction.title": "Introduction: The Challenge of Modern Deployments",
                    "introduction.p1": "Modern applications, especially on platforms like Kubernetes, often consist of many components and configurations. Managing updates, ensuring consistency across environments, and maintaining traceability of changes quickly becomes complex.",
                    "introduction.p2": "Traditional CI/CD pipelines hit their limits here. How can we ensure that the <em>actual</em> state of our infrastructure and applications <em>always</em> matches the desired state, which is managed securely and traceably?",
                    "introduction.p3": "This is where GitOps and tools like Flux come into play.",
                    "quickstart.title": "Quick Start Guide: Get started with GitOps in 5 minutes",
                    "quickstart.prerequisites.title": "Prerequisites",
                    "quickstart.prerequisites.l1": "A running Kubernetes cluster (e.g., minikube, kind, cloud cluster)",
                    "quickstart.prerequisites.l2": "`kubectl` CLI tool installed and configured",
                    "quickstart.prerequisites.l3": "A Git repository (e.g., on GitHub, GitLab)",
                    "quickstart.install.title": "Installation & Bootstrap",
                    "quickstart.install.step1.title": "1. Install Flux CLI",
                    "quickstart.install.step2.title": "2. Check Cluster",
                    "quickstart.install.step3.title": "3. Install Flux in Cluster (Bootstrap)",
                    "quickstart.install.step3.p1": "Adjust the values for `--owner`, `--repository`, etc., to your environment.",
                    "quickstart.install.step3.codecomment": "Example for GitHub",
                    "quickstart.install.step3.p2": "This command installs Flux, creates deploy keys, and commits the Flux configuration to your repository.",
                    "quickstart.install.step4.title": "4. Deploy Example Application",
                    "quickstart.install.step4.p1": "Add a Kubernetes manifest file (e.g., `nginx-deployment.yaml`) to your Git repository under the path specified with `--path` (`./clusters/my-cluster`). Flux will detect this change and apply it.",
                    "quickstart.install.step4.codecomment": "Example: ./clusters/my-cluster/nginx-deployment.yaml",
                    "quickstart.install.step4.codecomment2": "Flux can also automate image updates!",
                    "quickstart.install.step4.p2": "Commit and push this file. Flux will deploy it to the cluster shortly!",
                    "gitops.title": "What is GitOps?",
                    "gitops.definition.title": "Definition",
                    "gitops.definition.p1": "GitOps is an operating model for cloud-native applications (especially Kubernetes) that uses Git as the **Single Source of Truth** for declarative infrastructure and application definitions. System changes are managed through Git commits and applied automatically.",
                    "gitops.benefits.title": "Why GitOps? (Benefits)",
                    "gitops.benefits.l1": "<strong>Traceability:</strong> Every change is a Git commit (who, what, when).",
                    "gitops.benefits.l2": "<strong>Consistency:</strong> Git defines the state; deviations are corrected.",
                    "gitops.benefits.l3": "<strong>Reliability:</strong> Easy rollbacks via `git revert`.",
                    "gitops.benefits.l4": "<strong>Productivity:</strong> Developers use familiar Git workflows.",
                    "gitops.benefits.l5": "<strong>Security:</strong> Changes are audited and controlled.",
                    "gitops.principles.title": "Core Principles",
                    "gitops.principles.declarative.title": "Declarative",
                    "gitops.principles.declarative.p1": "The desired state is described (YAML), not the steps to get there.",
                    "gitops.principles.versioned.title": "Versioned in Git",
                    "gitops.principles.versioned.p1": "Git is the single source of truth.",
                    "gitops.principles.automated.title": "Applied Automatically",
                    "gitops.principles.automated.p1": "Changes in Git are automatically applied to the system.",
                    "gitops.principles.reconciled.title": "Continuously Reconciled",
                    "gitops.principles.reconciled.p1": "Agents ensure the live state matches the Git state.",
                    "gitops.visualization.placeholder": "(A visualization of the GitOps cycle could go here)",
                    "flux.title": "What is Flux?",
                    "flux.tool.title": "A Tool for GitOps",
                    "flux.tool.p1": "Flux is a set of continuous delivery solutions for Kubernetes, openly developed, that implements the GitOps approach. It monitors Git repositories (or other sources) and automatically synchronizes the declared state with the cluster.",
                    "flux.tool.p2": "Flux is a <strong class=\"text-text-light dark:text-text-dark\">CNCF Graduated Project</strong>, underscoring its maturity and broad adoption.",
                    "flux.alternative.title": "Alternative: Argo CD",
                    "flux.alternative.p1": "Argo CD is another very popular CNCF GitOps tool with similar goals but a different architecture (more pull-based with a central UI).",
                    "flux.architecture.title": "Architecture: The Controllers",
                    "flux.architecture.p1": "Flux consists of specialized controllers (Kubernetes operators) that work together:",
                    "flux.architecture.source": "<strong>Source Controller:</strong> Fetches manifests from Git, Helm repos, buckets, etc.",
                    "flux.architecture.kustomize": "<strong>Kustomize Controller:</strong> Applies Kustomizations.",
                    "flux.architecture.helm": "<strong>Helm Controller:</strong> Manages Helm releases.",
                    "flux.architecture.notification": "<strong>Notification Controller:</strong> Sends notifications (Slack, Teams, etc.).",
                    "flux.architecture.image": "<strong>Image Reflector & Automation Controller:</strong> Monitor for new container images and update Git.",
                    "flux.architecture.placeholder": "(An architecture diagram could go here)",
                    "workflow.title": "The GitOps Workflow with Flux",
                    "workflow.step1.title": "Change in Git",
                    "workflow.step1.p1": "A developer or automation process changes the declarative configuration (e.g., Kubernetes YAML, Kustomization, Helm Release) and pushes the commit to Git.",
                    "workflow.step2.title": "Flux Detects Change",
                    "workflow.step2.p1": "The Flux Source Controller detects the new commit in the monitored Git repository (or other source).",
                    "workflow.step3.title": "Flux Applies Change",
                    "workflow.step3.p1": "Depending on the configuration, the Kustomize Controller or Helm Controller renders the manifests and applies them to the Kubernetes cluster.",
                    "workflow.step4.title": "Continuous Reconciliation",
                    "workflow.step4.p1": "Flux continues to monitor the cluster. If manual changes are made (drift), Flux automatically reverts the state back to the one defined in Git.",
                    "workflow.optional.title": "(Optional) Image Automation",
                    "workflow.optional.p1": "If configured, the Flux Image Controllers can detect new container images in a registry, update the image tags in the Git manifests (via commit), and thus automatically trigger the workflow for image updates.",
                    "workflow.placeholder": "(A visualization of the workflow could go here)",
                    "quiz.title": "Test Your Knowledge!",
                    "quiz.submit": "Submit Quiz",
                    "quiz.q1.question": "1. What is the central \"Source of Truth\" in the GitOps model?",
                    "quiz.q1.option1": "A) The Kubernetes Cluster",
                    "quiz.q1.option2": "B) A CI/CD Pipeline Configuration",
                    "quiz.q1.option3": "C) A Git Repository",
                    "quiz.q1.option4": "D) The Flux Operators",
                    "quiz.q1.answer": "C) A Git Repository",
                    "quiz.q2.question": "2. Which core principle of GitOps describes defining the *desired* system state, not the steps to get there?",
                    "quiz.q2.option1": "A) Versioned in Git",
                    "quiz.q2.option2": "B) Declarative",
                    "quiz.q2.option3": "C) Applied Automatically",
                    "quiz.q2.option4": "D) Continuously Reconciled",
                    "quiz.q2.answer": "B) Declarative",
                    "quiz.q3.question": "3. What is Flux in the context of GitOps?",
                    "quiz.q3.option1": "A) A Cloud Provider Service",
                    "quiz.q3.option2": "B) A Programming Language for Kubernetes",
                    "quiz.q3.option3": "C) A set of Kubernetes operators implementing GitOps",
                    "quiz.q3.option4": "D) An alternative version control system to Git",
                    "quiz.q3.answer": "C) A set of Kubernetes operators implementing GitOps",
                    "quiz.q4.question": "4. Which Flux controller is primarily responsible for monitoring configured sources like Git repositories for changes?",
                    "quiz.q4.option1": "A) Helm Controller",
                    "quiz.q4.option2": "B) Kustomize Controller",
                    "quiz.q4.option3": "C) Notification Controller",
                    "quiz.q4.option4": "D) Source Controller",
                    "quiz.q4.answer": "D) Source Controller",
                    "quiz.q5.question": "5. What does the term \"Reconciliation\" mean in the context of Flux?",
                    "quiz.q5.option1": "A) The initial installation of Flux in the cluster.",
                    "quiz.q5.option2": "B) Sending notifications on errors.",
                    "quiz.q5.option3": "C) The continuous process of ensuring the live state of the cluster matches the state declared in Git and correcting drifts.",
                    "quiz.q5.option4": "D) Manually applying configurations by a developer.",
                    "quiz.q5.answer": "C) The continuous process of ensuring the live state of the cluster matches the state declared in Git and correcting drifts.",
                    "quiz.q6.question": "6. What typically triggers an update in the Kubernetes cluster when using a GitOps workflow with Flux?",
                    "quiz.q6.option1": "A) A manual `kubectl apply` command by an administrator.",
                    "quiz.q6.option2": "B) A new commit or merge to the monitored Git repository.",
                    "quiz.q6.option3": "C) A restart of the Kubernetes cluster.",
                    "quiz.q6.option4": "D) A notification from the Notification Controller.",
                    "quiz.q6.answer": "B) A new commit or merge to the monitored Git repository.",
                    "quiz.q7.question": "7. Which benefit of GitOps is particularly supported by the Git history?",
                    "quiz.q7.option1": "A) Increased Productivity",
                    "quiz.q7.option2": "B) Improved Security",
                    "quiz.q7.option3": "C) Higher Reliability through easy rollbacks",
                    "quiz.q7.option4": "D) Traceability and Audits (who changed what when)",
                    "quiz.q7.answer": "D) Traceability and Audits (who changed what when)",
                    "quiz.q8.question": "8. Which Flux controller is responsible for actually applying Kubernetes manifests (e.g., from Kustomizations or Helm Charts) to the cluster?",
                    "quiz.q8.option1": "A) Source Controller and Image Controller",
                    "quiz.q8.option2": "B) Kustomize Controller and Helm Controller",
                    "quiz.q8.option3": "C) Notification Controller and Source Controller",
                    "quiz.q8.option4": "D) Only the Kustomize Controller",
                    "quiz.q8.answer": "B) Kustomize Controller and Helm Controller",
                    "quiz.q9.question": "9. Which organization is behind Flux and has classified it as a \"Graduated Project\"?",
                    "quiz.q9.option1": "A) Apache Software Foundation",
                    "quiz.q9.option2": "B) Linux Foundation",
                    "quiz.q9.option3": "C) Cloud Native Computing Foundation (CNCF)",
                    "quiz.q9.option4": "D) Kubernetes Steering Committee",
                    "quiz.q9.answer": "C) Cloud Native Computing Foundation (CNCF)",
                    "quiz.q10.question": "10. Which other GitOps tool is mentioned in the document as a popular alternative to Flux?",
                    "quiz.q10.option1": "A) Jenkins X",
                    "quiz.q10.option2": "B) Tekton",
                    "quiz.q10.option3": "C) Argo CD",
                    "quiz.q10.option4": "D) Spinnaker",
                    "quiz.q10.answer": "C) Argo CD",
                    "quiz.feedback.correct": "Correct!",
                    "quiz.feedback.incorrect": "Incorrect. Correct answer: ",
                    "quiz.feedback.noanswer": "No answer selected.",
                    "quiz.results.score": "Your score: {score} out of {total} ({percentage}%)",
                    "conclusion.title": "Conclusion: GitOps with Flux as a Success Factor",
                    "conclusion.p1": "GitOps, implemented with tools like Flux, offers a robust, transparent, and automated way to manage Kubernetes clusters and applications.",
                    "conclusion.l1": "It establishes Git as a reliable source of truth.",
                    "conclusion.l2": "It promotes consistency and repeatability across environments.",
                    "conclusion.l3": "It significantly simplifies rollbacks and audits.",
                    "conclusion.l4": "It improves collaboration between development and operations teams.",
                    "conclusion.l5": "It enhances security through controlled, automated changes.",
                    "conclusion.p2": "By automating the reconciliation between the desired state (Git) and the actual state (cluster), Flux enables a more reliable and efficient Continuous Delivery pipeline for cloud-native environments.",
                    "conclusion.button": "To Flux Documentation",
                    "footer.p1": "Visualization created to explain GitOps and Flux.",
                    "footer.p2": "Status: April 2025. Based on the document \"GitOps & Flux Visualized - An Introduction\".",
                    "footer.p3": "&copy; 2025 - Generated by Gemini.",
                    "common.copy": "Copy",
                    "common.copied": "Copied!",
                    "common.copyError": "Error"
                }
            };

            // Define elements needed globally first
            const htmlElement = document.documentElement;
            const languageToggle = document.getElementById('language-toggle');
            const languageToggleMobile = document.getElementById('language-toggle-mobile');
            const darkModeToggle = document.getElementById('dark-mode-toggle');
            const darkModeToggleMobile = document.getElementById('dark-mode-toggle-mobile');
            const quizForm = document.getElementById('quiz-form');
            const submitButton = document.getElementById('submit-quiz');
            const resultsContainer = document.getElementById('quiz-results');
            const mobileMenuButton = document.getElementById('mobile-menu-button');
            const mobileMenu = document.getElementById('mobile-menu');
            const mobileCloseButton = document.getElementById('mobile-close-button');
            const mobileNavLinks = document.querySelectorAll('.mobile-nav-link');

            // Define functions
            const applyTheme = (isDark) => {
                const currentLang = htmlElement.getAttribute('lang') || 'de';
                const toggleLabel = translations[currentLang]?.['nav.toggleDarkMode'] || 'Toggle Dark Mode';
                const sunIcon = '&#xe9ce;';
                const moonIcon = '&#xe9c4;';

                if (isDark) {
                    htmlElement.classList.add('dark');
                    if(darkModeToggle) darkModeToggle.innerHTML = `<span class="lucide text-xl">${sunIcon}</span>`;
                    if(darkModeToggleMobile) darkModeToggleMobile.innerHTML = `<span class="lucide text-xl">${sunIcon}</span>`;
                    localStorage.setItem('theme', 'dark');
                } else {
                    htmlElement.classList.remove('dark');
                    if(darkModeToggle) darkModeToggle.innerHTML = `<span class="lucide text-xl">${moonIcon}</span>`;
                    if(darkModeToggleMobile) darkModeToggleMobile.innerHTML = `<span class="lucide text-xl">${moonIcon}</span>`;
                    localStorage.setItem('theme', 'light');
                }
                if(darkModeToggle) darkModeToggle.setAttribute('aria-label', toggleLabel);
                if(darkModeToggleMobile) darkModeToggleMobile.setAttribute('aria-label', toggleLabel);
            };

            const populateQuiz = (lang) => {
                if (!quizForm) return;
                quizForm.innerHTML = ''; // Clear existing questions

                for (let i = 1; i <= 10; i++) { // Assuming 10 questions
                    const qKeyBase = `quiz.q${i}`;
                    const questionTextKey = `${qKeyBase}.question`;
                    const answerKey = `${qKeyBase}.answer`;

                    const questionText = translations[lang]?.[questionTextKey];
                    const correctAnswerValue = translations['de']?.[answerKey]; // Correct answer stored under 'de' key for consistency
                    const correctAnswerText = translations[lang]?.[answerKey]; // Display text for correct answer in current lang

                    if (!questionText || !correctAnswerValue) {
                        console.warn(`Missing translation for quiz question ${i} in language ${lang}`);
                        continue; // Skip this question if data is missing
                    }

                    const questionDiv = document.createElement('div');
                    questionDiv.classList.add('quiz-question', 'p-4', 'border', 'border-slate-200', 'dark:border-slate-700', 'rounded-lg');
                    questionDiv.setAttribute('data-question-index', i - 1);
                    questionDiv.setAttribute('data-correct-answer', correctAnswerValue);
                    questionDiv.setAttribute('data-correct-answer-display', correctAnswerText);

                    const questionP = document.createElement('p');
                    questionP.classList.add('font-semibold', 'mb-4');
                    questionP.innerHTML = questionText;
                    questionDiv.appendChild(questionP);

                    const optionsDiv = document.createElement('div');
                    optionsDiv.classList.add('space-y-2');

                    for (let j = 1; j <= 4; j++) {
                        const optionKey = `${qKeyBase}.option${j}`;
                        const optionText = translations[lang]?.[optionKey];
                        const optionValue = translations['de']?.[optionKey]; // Use 'de' value for comparison consistency

                        if (!optionText || !optionValue) {
                            console.warn(`Missing translation for quiz question ${i} option ${j} in language ${lang}`);
                            continue;
                        }

                        const label = document.createElement('label');
                        label.classList.add('flex', 'items-center', 'p-2', 'rounded', 'hover:bg-slate-100', 'dark:hover:bg-slate-700', 'cursor-pointer');

                        const input = document.createElement('input');
                        input.type = 'radio';
                        input.name = `question-${i - 1}`;
                        input.value = optionValue;
                        input.classList.add('mr-3', 'form-radio', 'h-4', 'w-4', 'text-primary', 'dark:text-primary-dark', 'focus:ring-primary', 'dark:focus:ring-primary-dark', 'dark:bg-slate-600', 'dark:border-slate-500');

                        label.appendChild(input);
                        const textNode = document.createElement('span');
                        textNode.innerHTML = optionText;
                        label.appendChild(textNode);
                        optionsDiv.appendChild(label);
                    }

                    questionDiv.appendChild(optionsDiv);
                    const feedbackP = document.createElement('p');
                    feedbackP.classList.add('quiz-feedback', 'text-sm');
                    questionDiv.appendChild(feedbackP);

                    quizForm.appendChild(questionDiv);
                }
            };

            const translatePage = (lang) => {
                document.querySelectorAll('[data-translate-key]').forEach(el => {
                    const key = el.getAttribute('data-translate-key');
                    const translation = translations[lang]?.[key];
                    if (translation !== undefined) {
                        el.innerHTML = translation;
                    } else {
                        console.warn(`Translation key not found for language '${lang}': ${key}`);
                    }
                });
                document.querySelectorAll('[data-translate-aria-label]').forEach(el => {
                    const key = el.getAttribute('data-translate-aria-label');
                    const translation = translations[lang]?.[key];
                    if (translation !== undefined) {
                        el.setAttribute('aria-label', translation);
                    } else {
                        console.warn(`Translation key not found for aria-label language '${lang}': ${key}`);
                    }
                });
                document.querySelectorAll('.copy-button').forEach(btn => {
                    const copiedText = translations[lang]?.['common.copied'] || 'Copied!';
                    const errorText = translations[lang]?.['common.copyError'] || 'Error';
                    // Reset button text only if it's not showing 'Copied!' or 'Error'
                    if (btn.textContent === translations['de']?.['common.copy'] || btn.textContent === translations['en']?.['common.copy'] || 
                        (btn.textContent !== copiedText && btn.textContent !== errorText)) {
                        btn.textContent = translations[lang]?.['common.copy'] || 'Copy';
                    }
                });
                populateQuiz(lang);
                // Re-apply theme after translation ensures labels are correct
                if (typeof applyTheme === 'function') {
                   applyTheme(document.documentElement.classList.contains('dark'));
                }
            };

            const updateLanguageButton = (button, lang) => {
                if (button) {
                    button.textContent = lang === 'de' ? 'EN' : 'DE';
                    const toggleLangLabel = lang === 'de' ? 'Switch to English' : 'Zu Deutsch wechseln';
                    button.setAttribute('aria-label', toggleLangLabel);
                }
            };

            const toggleLanguage = () => {
                const currentLang = htmlElement.getAttribute('lang') || 'de';
                const newLang = currentLang === 'de' ? 'en' : 'de';
                htmlElement.setAttribute('lang', newLang);
                updateLanguageButton(languageToggle, newLang);
                updateLanguageButton(languageToggleMobile, newLang);
                translatePage(newLang);
                localStorage.setItem('language', newLang);
            };

            // Determine initial language
            let initialLang = localStorage.getItem('language') || htmlElement.getAttribute('lang') || 'de';
            if (initialLang !== 'de' && initialLang !== 'en') initialLang = 'de';
            htmlElement.setAttribute('lang', initialLang);
            updateLanguageButton(languageToggle, initialLang);
            updateLanguageButton(languageToggleMobile, initialLang);

            // --- Event Listeners ---
            // Language Toggle
            if (languageToggle) languageToggle.addEventListener('click', toggleLanguage);
            if (languageToggleMobile) languageToggleMobile.addEventListener('click', toggleLanguage);

            // Dark Mode Toggle
            const userPrefersDark = localStorage.getItem('theme') === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches);
            [darkModeToggle, darkModeToggleMobile].forEach(toggle => {
                if(toggle) {
                    toggle.addEventListener('click', () => {
                        const isCurrentlyDark = document.documentElement.classList.contains('dark');
                        applyTheme(!isCurrentlyDark);
                    });
                }
            });

            // Mobile Menu
            if (mobileMenuButton && mobileMenu && mobileCloseButton) {
                mobileMenuButton.addEventListener('click', () => {
                    mobileMenu.classList.remove('hidden', '-translate-x-full');
                    mobileMenu.classList.add('translate-x-0');
                });
                mobileCloseButton.addEventListener('click', () => {
                    mobileMenu.classList.remove('translate-x-0');
                    mobileMenu.classList.add('-translate-x-full');
                    setTimeout(() => {
                       if(mobileMenu.classList.contains('-translate-x-full')) {
                            mobileMenu.classList.add('hidden');
                       }
                    }, 300);
                });
                mobileNavLinks.forEach(link => {
                    link.addEventListener('click', () => mobileCloseButton.click());
                });
            }

            // Copy Buttons
            const codeBlocks = document.querySelectorAll('pre[class*="language-"]');
            codeBlocks.forEach(block => {
                const copyButton = block.querySelector('.copy-button');
                const codeElement = block.querySelector('code');
                if (copyButton && codeElement) {
                    copyButton.addEventListener('click', () => {
                        const lang = htmlElement.getAttribute('lang') || 'de';
                        const codeToCopy = codeElement.innerText;
                        navigator.clipboard.writeText(codeToCopy).then(() => {
                            copyButton.textContent = translations[lang]?.['common.copied'] || 'Copied!';
                            setTimeout(() => {
                                // Reset text only if it wasn't changed by translation in the meantime
                                 if (copyButton.textContent === (translations[lang]?.['common.copied'] || 'Copied!')) {
                                    copyButton.textContent = translations[lang]?.['common.copy'] || 'Copy';
                                 }
                            }, 2000);
                        }).catch(err => {
                            console.error('Failed to copy code: ', err);
                             const errorText = translations[lang]?.['common.copyError'] || 'Error';
                            copyButton.textContent = errorText;
                            setTimeout(() => {
                                 if (copyButton.textContent === errorText) {
                                    copyButton.textContent = translations[lang]?.['common.copy'] || 'Copy';
                                 }
                            }, 2000);
                        });
                    });
                }
            });

            // Quiz Submission
            if (submitButton && resultsContainer && quizForm) {
                submitButton.addEventListener('click', () => {
                    const lang = htmlElement.getAttribute('lang') || 'de';
                    let score = 0;
                    const totalQuestions = quizForm.querySelectorAll('.quiz-question').length;
                    resultsContainer.innerHTML = '';

                    quizForm.querySelectorAll('.quiz-question').forEach((questionDiv, index) => {
                        const feedbackP = questionDiv.querySelector('.quiz-feedback');
                        feedbackP.textContent = '';
                        feedbackP.className = 'quiz-feedback text-sm';

                        const selectedOption = questionDiv.querySelector(`input[name="question-${index}"]:checked`);
                        const correctAnswerValue = questionDiv.getAttribute('data-correct-answer');
                        const correctAnswerDisplay = questionDiv.getAttribute('data-correct-answer-display');

                        if (selectedOption) {
                            if (selectedOption.value === correctAnswerValue) {
                                score++;
                                feedbackP.textContent = translations[lang]?.['quiz.feedback.correct'] || 'Correct!';
                                feedbackP.classList.add('quiz-correct');
                            } else {
                                const incorrectMsg = translations[lang]?.['quiz.feedback.incorrect'] || 'Incorrect. Correct answer: ';
                                const answerPrefixMatch = correctAnswerDisplay?.match(/^\s*[A-Z]\)/i);
                                const answerPrefix = answerPrefixMatch ? answerPrefixMatch[0] : '';
                                feedbackP.textContent = `${incorrectMsg}${answerPrefix}`;
                                feedbackP.classList.add('quiz-incorrect');
                            }
                        } else {
                            feedbackP.textContent = translations[lang]?.['quiz.feedback.noanswer'] || 'No answer selected.';
                            feedbackP.classList.add('text-muted-light', 'dark:text-muted-dark');
                        }
                    });

                    const scorePercentage = Math.round(totalQuestions > 0 ? (score / totalQuestions) * 100 : 0);
                    const scoreTemplate = translations[lang]?.['quiz.results.score'] || 'Your score: {score} out of {total} ({percentage}%)';
                    const scoreText = scoreTemplate
                        .replace('{score}', score)
                        .replace('{total}', totalQuestions)
                        .replace('{percentage}', scorePercentage);

                    const resultMessage = document.createElement('p');
                    resultMessage.classList.add('text-lg', 'font-bold', 'mt-4');
                    resultMessage.textContent = scoreText;
                    resultsContainer.appendChild(resultMessage);

                    resultsContainer.scrollIntoView({ behavior: 'smooth', block: 'center' });
                });
            }

            // Initial Page Load Actions
            translatePage(initialLang);
            applyTheme(userPrefersDark);

        }); // End DOMContentLoaded
    </script>

</body>
</html>
